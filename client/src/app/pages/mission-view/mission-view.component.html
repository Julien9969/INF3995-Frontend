<mat-toolbar *ngIf="!isTimeMachine" class="sticky-toolbar">
  <button (click)="this.toggleMission()" [disabled]="missionState === MissionState.ONGOING" class="toolbar-button"
          color="primary"
          mat-raised-button>{{missionState === MissionState.ENDED ? 'Redémarrer mission' : 'Lancer mission'}}
    <mat-icon>{{this.missionState === MissionState.ENDED ? 'refresh' : 'play_arrow'}}</mat-icon>
  </button>
  <button (click)="this.toggleMission()" [disabled]="missionState !== MissionState.ONGOING" class="toolbar-button"
          color="accent"
          mat-raised-button>Arrêter la mission
    <mat-icon>stop</mat-icon>
  </button>
  <span class="bar-spacer"></span>
  <button [matTooltip]="identifyRobotTooltip" mat-icon-button>
    <mat-icon>crisis_alert</mat-icon>
  </button>
</mat-toolbar>


<div class="accordion-headers-align">
  <mat-expansion-panel class="accordion-headers-align" [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Mission d'exploration
      </mat-panel-title>
      <mat-panel-description>
        <span></span>
        <mat-icon>explore</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <ng-template matExpansionPanelContent>
      <app-mission [status]="status"></app-mission>
    </ng-template>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(this.missionState === MissionState.NOT_STARTED)" [expanded]="false">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Carte exploratoire en 3D
      </mat-panel-title>
      <mat-panel-description>
        <span></span>
        <mat-icon>map</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <ng-template matExpansionPanelContent>
      <app-map-view [map]="map"></app-map-view>
    </ng-template>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(this.missionState === MissionState.NOT_STARTED)" [expanded]="true" class="last-expansion-panel">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Journaux des robots
      </mat-panel-title>
      <mat-panel-description>
        <span></span>
        <mat-icon>feed</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <ng-template matExpansionPanelContent>
      <app-logs [logs]="logs"></app-logs>
    </ng-template>
  </mat-expansion-panel>
</div>

<div *ngIf="isLoading" class="spinner">
  <mat-spinner></mat-spinner>
</div>
